<script type="text/javascript">

    RED.nodes.registerType('auroralDataCollector',{
        category: 'Auroral',
        color: '#3FADB5',
        defaults: {
            name: { value: "", required: true },
            objectId: { value: "", required: true },
            agent: { value: "", type: "auroral-agent", required: true },
            registering: { value: true },
            unregistering: { value: true },
        },
        outputs: 1,
        inputs: 1,
        icon: "auroral.png",
        label: function() {
            return this.name || "auroralDataCollector";
        }
    });
</script>

<script type="text/html" data-template-name="auroralDataCollector">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-cube"></i> Name:</label>
        <input type="text" id="node-input-name" placeholder="Device123">
    </div>
    <div class="form-row">
        <label for="node-input-objectId"><i class="fa fa-cube"></i> AdapterId:</label>
        <input type="text" id="node-input-objectId" placeholder="custom object ID">
    </div>
    <div class="form-row">
        <label for="agent-url"><i class="fa fa-plug"></i> Agent:</label>
        <input id="node-input-agent" >
    </div>
    <div class="form-row">
        <label></label> </label>
        <input type="checkbox" id="node-input-registering" style="margin-left:0px; vertical-align:top; width:auto !important;"> 
        <label style="margin-left:5px; width:auto !important;" for="node-input-registering" data-i18n="trigger.extend">Register item if doesn't exists</label>
    </div>
    <div class="form-row">
        <label></label> </label>
        <input type="checkbox" id="node-input-unregistering" style="margin-left:0px; vertical-align:top; width:auto !important;"> 
        <label style="margin-left:5px; width:auto !important;" for="node-input-unregistering" data-i18n="trigger.extend">Unregister item when destroyed</label>
    </div>
</script>

<script type="text/html" data-help-name="auroralDataCollector">
    <p>Collects data from device in auroral network</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>oid
            <span class="property-type">string</span>
        </dt>
        <dd> Object id of Auroral data source device</dd>
        <dt>pid <span class="property-type">string</span></dt>
        <dd> Property id of property in requested device</dd>
    </dl>
    <h3>Outputs</h3>
    <ol class="node-ports">
        <li>Standard output
            <dl class="message-properties">
                <dt>payload <span class="property-type">string</span></dt>
                <dd>Retrieved response from Auroral device</dd>
            </dl>
        </li>
    </ol>
    <h3>Details</h3>
    This service is registered in Auroral agent with name and adapterId from it's config.
    Afterwards, when node is deployed, it is possible to make requests for getting data from devices connected to Auroral network.
    They are addressable by OID and PID, sent in properities <code>msg.oid</code> and <code>msg.pid</code>.
    <h3>Notes</h3>
    <li>You need to enable service in Auroral dashboard before making requests</li>
<!-- <h3>References</h3>
    <ul>
        <li><a>GitHub</a> - the nodes github repository</li>
    </ul> -->
</script>